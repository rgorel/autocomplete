var PREFIX = 'result';

function Results(limit) {
  var results = {};

  function addResult(result, score) {
    results[result] || (results[result] = 0);
    results[result] += score;
  };

  this.add = function(newResults) {
    newResults.constructor === Array || (newResults = [newResults])

    var seen = {};

    newResults.forEach(function(result) {
      var score = seen[result] ? 1 : 5;
      addResult(result, score);
      seen[result] = true;
    });
  }

  this.getRawResults = function() {
    return results;
  }

  this.have = function(item) {
    return typeof results[item] === 'number'
  }

  this.getResults = function() {
    return Object
      .keys(results)
      .sort(function(a, b) {
        if (results[a] > results[b]) return -1;
        if (results[a] < results[b]) return 1;

        return 0;
      })
      .slice(0, limit);
  };
}

module.exports = Results;