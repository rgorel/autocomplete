var TOKEN_PREFIX = 'token';

var Index = function(hash) {
  this.hash = hash || {};

  function hashKey(key) {
    return [TOKEN_PREFIX, key].join(':');
  }

  this.lookup = function(key) {
    return Object.keys(this.hash[hashKey(key)]) || [];
  }

  this.add = function(key, value) {
    this.hash.hasOwnProperty(hashKey(key)) || (this.hash[hashKey(key)] = {})
    this.hash[hashKey(key)][value] = true;
  }
};

module.exports = Index;